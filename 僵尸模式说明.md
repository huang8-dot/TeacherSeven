# 僵尸模式说明文档

## 模式介绍

僵尸模式是方向指导教学游戏的一个全新挑战模式，在原有游戏基础上增加了更多刺激和挑战性的元素。在这个模式中，玩家不仅要导航到达目标地点，还要避开在城市中游荡的僵尸！

## 特色功能

### 1. 僵尸威胁
- 地图上会随机出现僵尸，它们会缓慢移动
- 如果玩家与僵尸在同一格子相遇，玩家的生命值会减少20点
- 当生命值降至0时，游戏结束
- 当玩家与僵尸发生碰撞后，僵尸会立即停止追击行为，给玩家喘息机会
- 玩家需要完成3次有效移动后，僵尸才会恢复追击能力
- 如果玩家超过4秒不移动，僵尸会提前恢复追击能力，无论是否完成3次移动
- 僵尸会主动追踪并获取爱心道具
- 获得爱心后，僵尸体型增大至原始大小的2倍，并立即启用追击状态抓捕玩家
- 爱心效果持续7秒后，僵尸恢复原始大小和正常行为

### 2. 爱心道具系统
- 在游戏道路区域内随机生成2个爱心道具（❤️）
- 爱心只在点击"开始游戏"后随机刷新
- 玩家与爱心碰撞：立即增加20点生命值，爱心道具消失
- 僵尸与爱心碰撞：立即提升该僵尸的移动速度，持续7秒，爱心道具消失
- 获得爱心后，僵尸体型增大至原始大小的2倍，并立即追踪玩家
- 任务完成后，爱心图标会刷新，带有平滑的淡入淡出过渡效果
- 爱心道具不会生成在障碍物或不可到达区域
- 爱心道具具有明显的视觉效果和获取提示

### 3. 更大地图
- 使用12x12的更大地图网格，比普通模式更加复杂
- 更多的建筑物、道路和挑战

### 4. 任务系统
- 多个连续任务，需要按顺序完成
- 每完成一个任务会解锁下一个目标地点
- 完成所有任务才能获胜
- 每完成一个任务后，爱心图标会自动刷新

### 5. 障碍物
- 施工障碍物（🚧）阻挡某些路径
   障碍物下隧道阻挡某些路径
- 需要绕行才能到达目的地

### 6. 单行道
- 部分道路为单行道，只能按指定方向通行
- 不遵守单行道规则无法通行



## 游戏机制

### 生命值系统
- 玩家初始生命值为100
- 与僵尸接触会减少20点生命值
- 生命值归零则游戏失败
- 与爱心碰撞会增加20点生命值，可以超过最大值100

### 用户数据存储
- 游戏数据自动存储在浏览器缓存中（localStorage）
- 存储内容包括：游戏次数、胜利次数、失败次数、最高分等统计数据
- 数据在玩家死亡后也会自动更新
- 刷新页面后数据不会丢失，保持持久化存储
- 用户可以在游戏结束弹窗中查看自己的游戏统计信息

### 爱心道具系统
- 在游戏道路区域内随机生成2个爱心道具（❤️）
- 爱心只在点击"开始游戏"后随机刷新
- 玩家与爱心碰撞：立即增加20点生命值，爱心道具消失
- 僵尸与爱心碰撞：立即提升该僵尸的移动速度，持续7秒，爱心道具消失
- 获得爱心后，僵尸体型增大至原始大小的2倍，并立即追踪玩家
- 任务完成后，爱心图标会刷新，带有平滑的淡入淡出过渡效果
- 爱心道具不会生成在障碍物或不可到达区域
- 爱心道具具有明显的视觉效果和获取提示

### 僵尸AI
- 僵尸会随机移动，但当玩家接近（3格内）时会追踪玩家
- 玩家可以利用障碍物或建筑物甩开僵尸
- 追击机制：
  - 当僵尸与玩家发生碰撞后，所有僵尸会立即停止追击行为
   - 玩家需要完成3次有效移动（左转、右转或前进）后，僵尸才会恢复追击能力
   - 有效移动指的是成功执行的移动操作，无论是否改变位置（如转向操作）
   - 如果玩家超过4秒不移动，僵尸会提前恢复追击能力
   - 恢复追击后，僵尸会继续寻找并追踪玩家
- 僵尸目标优先级：
  - 第一优先级：检测到附近存在玩家时，立即执行抓捕玩家行为
  - 第二优先级：未检测到玩家但检测到附近有爱心时，立即执行获取爱心行为
  - 第三优先级：既无玩家也无爱心时，保持原有默认行为模式
- 僵尸爱心效果：
  - 获得爱心后，僵尸体型增大至原始大小的2倍
  - 移动速度提升50%
  - 玩家检测范围扩大至5格
  - 爱心效果持续7秒后，僵尸恢复原始大小和正常行为
  - 获得爱心后，僵尸立即启用追击状态抓捕玩家
  - 成功获取爱心后，必须立即切换至追踪并抓捕玩家的行为模式
  - 当玩家进入检测范围时，无论当前处于何种状态（包括正在获取爱心过程中），均需立即中断当前行为并优先执行抓捕玩家操作

## 操作方法

- 向上按钮：角色向上移动
- 向下按钮：角色向下移动
- 向左按钮：角色向左移动
- 向右按钮：角色向右移动
- 也可以使用键盘方向键进行操作

## 胜利条件

- 在规定时间内完成所有任务
- 成功避开所有僵尸
- 保持生命值高于0

## 失败条件

- 生命值降至0
- 时间耗尽
- 尝试移动到非法位置（障碍物、边界等）

## 策略建议

1. 规划最优路径，避免不必要的移动
2. 注意观察僵尸移动规律，提前规避
3. 利用建筑物和障碍物阻挡僵尸追击
4. 合理管理时间，不要在一个任务上花费过多时间
5. 注意单行道方向，避免无效移动
6. 与僵尸碰撞后，利用3次移动的安全期迅速远离僵尸群
7. 在安全期内优先考虑转向操作，保持移动的同时规划逃跑路线
8. 合理利用追击中断的机会完成任务目标，降低游戏难度
9. 避免长时间静止不动，否则僵尸会在4秒后提前恢复追击
10. 保持连续移动，确保能充分利用3次移动的安全期
11. 优先收集爱心道具恢复生命值，但要注意僵尸也会争夺爱心
12. 当僵尸获得爱心后，体型增大且立即追击玩家，此时应迅速远离
13. 利用任务完成后爱心刷新的时机，规划获取爱心的策略
14. 注意僵尸的目标优先级：玩家>爱心>随机移动，合理利用这一点
15. 在僵尸获得爱心后的7秒效果期内，尽量避开该僵尸的检测范围
16. 利用爱心刷新的平滑过渡时间，快速规划下一步行动
17. 保持生命值充足，避免因生命值过低而无法应对僵尸追击
18. 合理利用爱心道具的视觉效果，提前预判僵尸的行动方向

享受这个充满挑战的僵尸模式吧！